(this["webpackJsonpfind-pair"]=this["webpackJsonpfind-pair"]||[]).push([[0],{27:function(e,t,n){e.exports=n(44)},32:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(16),c=n.n(i),l=(n(32),n(7)),o=n(11),u=n(10),s=n(12),m="START_TIMER",d="OPEN_CARD",f="CLOSE_CARD",p="HIDE_CARD",h="RECEIVE_CARDS",b="RESET",E={countPair:18,totalCountCards:36,delayClosingPair:1e3,delayClosingCard:5e3},v={timer:300,cards:{visibleCounts:E.totalCountCards,total:[],isOpened:[]}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.timer,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return e-1;case b:return v.timer;default:return e}},g=n(14),C=n(4),y=function(e,t){return e.filter((function(e){return e.id===t})).map((function(e){return{id:e.id,name:e.name}}))},j=function(e){return e.map((function(e){return Object(C.a)({},e,{isClosed:!0,isHidden:!1})}))},_=function(e,t){return e.map((function(e){return e.id===t?Object(C.a)({},e,{isClosed:!1}):e}))},k=function(e){return e.map((function(e){return e.isClosed?e:Object(C.a)({},e,{isClosed:!0})}))},N=function(e){return e.map((function(e){return e.isHidden||e.isClosed?e:Object(C.a)({},e,{isHidden:!0})}))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v.cards,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(C.a)({},e,{isOpened:[].concat(Object(g.a)(e.isOpened),Object(g.a)(y(e.total,t.id))),total:_(e.total,t.id)});case f:return Object(C.a)({},e,{isOpened:[],total:k(e.total)});case p:return Object(C.a)({},e,{isOpened:[],visibleCounts:e.visibleCounts-2,total:N(e.total)});case h:return Object(C.a)({},e,{total:j(t.cards)});case b:return Object(C.a)({},v.cards,{total:j(t.cards)});default:return e}},T=Object(s.b)({timer:O,cards:w}),I=n(13),F=n.n(I),S=(n(37),function(e){return e<10?"0".concat(e):e}),P=function(e){return e&&e<30},R=function(e){var t=e.remainingTime,n=e.isFinish,a=function(e){return{min:S(Math.trunc(e/60)),sec:S(e%60)}}(t);return r.a.createElement("div",{className:F()("timer",{"timer--is-finishing":P(t),"timer--is-finished":n})},r.a.createElement("span",{className:"timer__value"},a.min),r.a.createElement("span",{className:"timer__dots"},":"),r.a.createElement("span",{className:"timer__value"},a.sec))};R.defaultProps={remainingTime:0};var A=R,H=Object(l.b)((function(e){return{remainingTime:e.timer}}),(function(e){return{tick:function(){return e({type:m})}}}))((function(e){var t=e.remainingTime,n=e.tick,i=e.isFinish;return Object(a.useEffect)((function(){var e=null;return i||(e=setInterval(n,1e3)),function(){clearInterval(e)}}),[n,i]),r.a.createElement(A,{remainingTime:t,isFinish:i})})),M=(n(38),function(e){var t=e.onClick,n=e.isClosed,a=e.isHidden,i=e.imgSrc;return r.a.createElement("li",{className:F()("card",{"card--is-hidden":a,"card--is-opened":!n})},r.a.createElement("button",{type:"button",onClick:t,className:"card__item card__item--back"}),r.a.createElement("button",{type:"button",onClick:t,className:"card__item card__item--front",style:{backgroundImage:"url(".concat("/find-pair","/").concat(i,")")}}))}),Y=(n(39),function(e){var t=e.cards,n=e.onClick;return r.a.createElement("ul",{className:"cards"},t.map((function(e){return r.a.createElement(M,{key:e.id,name:e.name,imgSrc:e.imgSrc,isClosed:e.isClosed,isHidden:e.isHidden,onClick:function(){return n(e)}})})))}),D=Object(l.b)((function(e){return{cards:e.cards.total,isOpened:e.cards.isOpened,countIsOpened:e.cards.isOpened.length}}),(function(e){return{open:function(t,n){return e(function(e,t){return{type:d,id:e,name:t}}(t,n))},close:function(){return e({type:f})},hide:function(){return e({type:p})}}}))((function(e){var t=e.cards,n=e.isOpened,i=e.countIsOpened,c=e.open,l=e.close,o=e.hide,u=Object(a.useCallback)((function(e){2!==i&&e.isClosed&&c(e.id,e.name)}),[i,c]),s=Object(a.useCallback)((function(){var e=[n[0],n[1]],t=e[0],a=e[1];return t.name.number===a.name.number&&t.name.suit===a.name.suit}),[n]);return Object(a.useEffect)((function(){var e=null,t=function(e){switch(e){case 2:return E.delayClosingPair;case 1:return E.delayClosingCard;default:return null}}(i);return t&&(e=setTimeout(l,t)),function(){clearTimeout(e)}}),[i,l]),Object(a.useEffect)((function(){2===i&&s()&&o()}),[i,o,s]),r.a.createElement(Y,{cards:t,onClick:u})})),x=Object(l.b)((function(e){return{isFinish:!e.timer||!e.cards.visibleCounts}}),null)((function(e){var t=e.isFinish,n=Object(u.e)();return Object(a.useEffect)((function(){t&&n.push("/result")}),[t,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(H,{isFinish:t}),r.a.createElement(D,null))})),W=n(26),J=(n(41),function(e){var t=e.children,n=e.title,i=e.open,c=Object(a.useState)(i),l=Object(W.a)(c,2),o=l[0],u=l[1],s=Object(a.useCallback)((function(){u(!o)}),[o]);return o?r.a.createElement("div",{className:"modal-wrapper"},r.a.createElement("div",{className:"modal"},r.a.createElement("button",{type:"button",className:"modal__close",onClick:s},r.a.createElement("span",{className:"modal__close-line"}),r.a.createElement("span",{className:"modal__close-line"})),n&&r.a.createElement("h2",{className:"modal__header"},n),r.a.createElement("div",{className:"modal__content"},t))):null});J.defaultProps={title:""};var q=J,B=(n(42),function(){return r.a.createElement(q,{open:!0,title:"Welcome to game 'Find a pair'"},r.a.createElement("h3",null,"Rules of the game:"),r.a.createElement("ul",{className:"intro-rules"},r.a.createElement("li",null,"On the screen you will see 18 pairs of playing cards face down."),r.a.createElement("li",null,"You need to find all pairs of cards for a certain time."),r.a.createElement("li",null,"In order to open a card, click on it."),r.a.createElement("li",null,"You can open only two cards at a time."),r.a.createElement("li",null,"After opening one card, you have 5 seconds to open the second card, otherwise the first card automatically will close."),r.a.createElement("li",null,"If the cards match, then they will be hidden."),r.a.createElement("li",null,"If the cards don't match, then they automatically close after 1 second. And only after that you can open the following cards."),r.a.createElement("li",null,"You cann't close open cards yourself."),r.a.createElement("li",null,"If you find all the cards in a certain time, then you will win"," ",r.a.createElement("span",{role:"img","aria-label":"win"},"\ud83c\udf89"),", if you don't have time, then you will lose"," ",r.a.createElement("span",{role:"img","aria-label":"lose"},"\ud83d\ude1f"),".")),r.a.createElement(o.b,{className:"button",to:{pathname:"/game"}},"Start the game"))}),L=["ace","king","queen","jack","ten","nine","eight","seven","six"],U=["heart","diamond","spades","club"],V=function(){var e=function(){var e=[];return U.forEach((function(t){return L.forEach((function(n){return e.push({imgSrc:"media/cards/".concat(n,"_").concat(t,".png"),name:{number:n,suit:t}})})),e})),e}();if(e.length<E.countPair)return[];var t=function(e){for(var t=[];t.length<E.countPair;){var n=e[Math.floor(Math.random()*e.length)];t.includes(n)||t.push(n)}return t}(e);return function(e){return e.sort((function(){return Math.random()-.5}))}([].concat(Object(g.a)(t),Object(g.a)(t))).map((function(e,t){return Object(C.a)({},e,{id:t})}))},z=(n(43),function(e){var t=e.isWin,n=e.onClick;return r.a.createElement(q,{open:!0,title:"Your result"},r.a.createElement("p",{className:F()("result",{"result--is-loser":!t})},t?"Yeah! You won! \ud83c\udf89":"Unfortunately you lost, you didn't have enough time \ud83d\ude1f Try again!"),r.a.createElement("button",{type:"button",className:"button",onClick:n},"Play again"))}),G=Object(l.b)((function(e){return{remainingTime:e.timer,visibleCounts:e.cards.visibleCounts}}),(function(e){return{reset:function(t){return e(function(e){return{type:b,cards:e}}(t))}}}))((function(e){var t=e.remainingTime,n=e.visibleCounts,i=e.reset,c=Object(u.e)(),l=Object(a.useMemo)((function(){return!!t&&!n}),[t,n]),o=Object(a.useCallback)((function(){var e=V();i(e),c.push("/game")}),[c,i]);return r.a.createElement(z,{isWin:l,onClick:o})})),K=Object(s.c)(T),Q=V();K.dispatch({type:h,cards:Q});var X=function(){return r.a.createElement(o.a,{hashType:"noslash"},r.a.createElement("main",null,r.a.createElement(l.a,{store:K},r.a.createElement(u.a,{exact:!0,path:"/",component:B}),r.a.createElement(u.a,{path:"/game",component:x}),r.a.createElement(u.a,{path:"/result",component:G}))))},Z=function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"Find a pair"))},$=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,null),r.a.createElement(X,null))};c.a.render(r.a.createElement($,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.63580ff0.chunk.js.map