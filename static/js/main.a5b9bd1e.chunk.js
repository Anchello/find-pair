(this["webpackJsonpfind-pair"]=this["webpackJsonpfind-pair"]||[]).push([[0],{15:function(e,n,t){e.exports=t(31)},20:function(e,n,t){},26:function(e,n,t){},27:function(e,n,t){},28:function(e,n,t){},29:function(e,n,t){},30:function(e,n,t){},31:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(8),c=t.n(r),s=(t(20),t(5)),u=t(3),o=t(6),l=t.n(o),m=(t(26),function(e){return e<10?"0".concat(e):e}),d=function(e){return e&&e<30},f=function(e){var n=e.remainingTime,t=e.isFinish,a=function(e){return{min:m(Math.trunc(e/60)),sec:m(e%60)}}(n);return i.a.createElement("div",{className:l()("timer",{"timer--is-finishing":d(n),"timer--is-finished":t})},i.a.createElement("span",{className:"timer__value"},a.min),i.a.createElement("span",{className:"timer__dots"},":"),i.a.createElement("span",{className:"timer__value"},a.sec))};f.defaultProps={remainingTime:0};var p=f,b="START_TIMER",v="OPEN_CARD",C="CLOSE_CARD",E="HIDE_CARD",O="RECEIVE_CARDS",h={countPair:18,totalCountCards:36,delayClosingPair:1500,delayClosingCard:5e3},g={timer:300,cards:{visibleCounts:h.totalCountCards,total:[],isOpened:[]}},_=Object(u.b)((function(e){return{remainingTime:e.timer}}),(function(e){return{tick:function(){e({type:b})}}}))((function(e){var n=e.remainingTime,t=e.tick,r=e.isFinish,c=Object(a.useRef)(0);return Object(a.useEffect)((function(){return r||(c.current=setInterval(t,1e3)),function(){clearInterval(c.current)}}),[t,r]),i.a.createElement(p,{remainingTime:n,isFinish:r})})),j=(t(27),function(e){var n=e.onClick,t=e.isClosed,a=e.isHidden,r=e.imgSrc;return i.a.createElement("li",{className:l()("card",{"card--is-hidden":a,"card--is-opened":!t})},i.a.createElement("button",{type:"button",onClick:n,className:"card__item card__item--back"}),i.a.createElement("button",{type:"button",onClick:n,className:"card__item card__item--front",style:{backgroundImage:"url(".concat("/find-pair","/").concat(r,")")}}))}),y=(t(28),function(e){var n=e.cards,t=e.onClick;return i.a.createElement("ul",{className:"cards"},n.map((function(e){return i.a.createElement(j,{key:e.id,name:e.name,imgSrc:e.imgSrc,isClosed:e.isClosed,isHidden:e.isHidden,onClick:function(){return t(e)}})})))}),k=Object(u.b)((function(e){return{cards:e.cards.total,isOpened:e.cards.isOpened,countIsOpened:e.cards.isOpened.length}}),(function(e){return{open:function(n,t){return e(function(e,n){return{type:v,id:e,name:n}}(n,t))},close:function(){return e({type:C})},hide:function(){return e({type:E})}}}))((function(e){var n=e.cards,t=e.isOpened,r=e.countIsOpened,c=e.open,s=e.close,u=e.hide,o=Object(a.useRef)(0),l=Object(a.useCallback)((function(e){2!==r&&e.isClosed&&c(e.id,e.name)}),[r,c]),m=Object(a.useCallback)((function(){var e=[t[0],t[1]],n=e[0],a=e[1];return n.name.number===a.name.number&&n.name.suit===a.name.suit}),[t]);return Object(a.useEffect)((function(){var e=function(e){switch(e){case 2:return h.delayClosingPair;case 1:return h.delayClosingCard;default:return null}}(r);return e&&(o.current=setTimeout(s,e)),function(){clearTimeout(o.current)}}),[r,s]),Object(a.useEffect)((function(){2===r&&m()&&u()}),[r,u,m]),i.a.createElement(y,{cards:n,onClick:l})})),N=t(14),T=(t(29),function(e){var n=e.children,t=e.title,r=e.open,c=Object(a.useState)(r),s=Object(N.a)(c,2),u=s[0],o=s[1],l=Object(a.useCallback)((function(){o(!u)}),[u]);return u?i.a.createElement("div",{className:"modal-wrapper"},i.a.createElement("div",{className:"modal"},i.a.createElement("button",{type:"button",className:"modal__close",onClick:l},i.a.createElement("span",{className:"modal__close-line"}),i.a.createElement("span",{className:"modal__close-line"})),t&&i.a.createElement("div",{className:"modal__header"},t),i.a.createElement("div",{className:"modal__content"},n))):null});T.defaultProps={title:""};var I=T,R=(t(30),function(e){var n=e.remainingTime,t=e.visibleCounts,a=e.isOpen,r=n&&!t;return i.a.createElement(I,{open:a},i.a.createElement("p",{className:l()("result",{"result--is-loser":!r})},r?"Yeah! You won! \ud83c\udf89":"Unfortunately you lost, you didn't have enough time \ud83d\ude1f Try again!"))}),F=Object(u.b)((function(e){return{remainingTime:e.timer,visibleCounts:e.cards.visibleCounts,isFinish:!e.timer||!e.cards.visibleCounts}}),null)((function(e){var n=e.remainingTime,t=e.visibleCounts,a=e.isFinish;return i.a.createElement(i.a.Fragment,null,i.a.createElement(_,{isFinish:a}),a?i.a.createElement(R,{remainingTime:n,visibleCounts:t,isOpen:!0}):i.a.createElement(k,null))})),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.timer,n=arguments.length>1?arguments[1]:void 0;return n.type===b?e-1:e},S=t(7),H=t(1),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.cards,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case v:return Object(H.a)({},e,{isOpened:[].concat(Object(S.a)(e.isOpened),Object(S.a)(e.total.filter((function(e){return e.id===n.id})).map((function(e){return{id:e.id,name:e.name}})))),total:e.total.map((function(e){return e.id===n.id?Object(H.a)({},e,{isClosed:!1}):e}))});case C:return Object(H.a)({},e,{isOpened:[],total:e.total.map((function(e){return e.isClosed?e:Object(H.a)({},e,{isClosed:!0})}))});case E:return Object(H.a)({},e,{isOpened:[],visibleCounts:e.visibleCounts-2,total:e.total.map((function(e){return e.isHidden||e.isClosed?e:Object(H.a)({},e,{isHidden:!0})}))});case O:return Object(H.a)({},e,{total:n.cards.map((function(e){return Object(H.a)({},e,{isClosed:!0,isHidden:!1})}))});default:return e}},A=Object(s.b)({timer:P,cards:w}),D=["ace","king","queen","jack","ten","nine","eight","seven","six"],M=["heart","diamond","spades","club"],x=function(){var e=function(){var e=[];return M.forEach((function(n){return D.forEach((function(t){return e.push({imgSrc:"media/cards/".concat(t,"_").concat(n,".png"),name:{number:t,suit:n}})})),e})),e}();if(e.length<h.countPair)return[];var n=function(e){for(var n=[];n.length<h.countPair;){var t=e[Math.floor(Math.random()*e.length)];n.includes(t)||n.push(t)}return n}(e);return function(e){return e.sort((function(){return Math.random()-.5}))}([].concat(Object(S.a)(n),Object(S.a)(n))).map((function(e,n){return Object(H.a)({},e,{id:n})}))},J=function(){return i.a.createElement("header",null,i.a.createElement("h1",null,"Find a pair"))},Y=Object(s.c)(A),q=x();Y.dispatch({type:O,cards:q});var B=function(){return i.a.createElement("main",null,i.a.createElement(u.a,{store:Y},i.a.createElement(J,null),i.a.createElement(F,null)))};c.a.render(i.a.createElement(B,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a5b9bd1e.chunk.js.map